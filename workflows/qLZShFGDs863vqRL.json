{
  "active": false,
  "connections": {
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone-å›¾ç‰‡",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone-å›¾ç‰‡": {
      "main": [
        [
          {
            "node": "èšåˆ-å›¾ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å›¾ç‰‡åˆ†æ": {
      "main": [
        [
          {
            "node": "è½¬æ¢å›¾ç‰‡ä¸ºTXTæ–‡ä»¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èšåˆ-å›¾ç‰‡": {
      "main": [
        [
          {
            "node": "å®Œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éå†-å›¾ç‰‡": {
      "main": [
        [
          {
            "node": "å›¾ç‰‡åˆ†æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader4": {
      "ai_document": [
        [
          {
            "node": "Pinecone-å›¾ç‰‡",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter4": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader4",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "å›¾ç‰‡åˆ†æ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone-PDF",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Pinecone-PDF",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone-PDF": {
      "main": [
        [
          {
            "node": "èšåˆ-PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èšåˆ-PDF": {
      "main": [
        [
          {
            "node": "å®Œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆå¹¶-PDF": {
      "main": [
        [
          {
            "node": "éå†-PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éå†-PDF": {
      "main": [
        [
          {
            "node": "Pinecone-PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆå¹¶-Office": {
      "main": [
        [
          {
            "node": "éå†-Office",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Officeè§£æ": {
      "main": [
        [
          {
            "node": "éå†-Officeåˆ†æ®µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI4": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone-Office",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader3": {
      "ai_document": [
        [
          {
            "node": "Pinecone-Office",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone-Office": {
      "main": [
        [
          {
            "node": "èšåˆ-Office",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éå†-Office": {
      "main": [
        [
          {
            "node": "Officeè§£æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èšåˆ-Office": {
      "main": [
        [
          {
            "node": "å®Œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èµ‹å€¼-åˆ†æ®µ": {
      "main": [
        [
          {
            "node": "è½¬åŒ–Officeä¸ºTXTæ–‡ä»¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éå†-Officeåˆ†æ®µ": {
      "main": [
        [
          {
            "node": "èµ‹å€¼-åˆ†æ®µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter3": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader3",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter1": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader1",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "main": [
        [
          {
            "node": "å®Œæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä»»åŠ¡é€‰æ‹©": {
      "main": [
        [
          {
            "node": "ä»»åŠ¡ç±»å‹",
            "type": "main",
            "index": 0
          },
          {
            "node": "åˆå¹¶-å›¾ç‰‡",
            "type": "main",
            "index": 1
          },
          {
            "node": "åˆå¹¶-PDF",
            "type": "main",
            "index": 1
          },
          {
            "node": "åˆå¹¶-Office",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ä»»åŠ¡ç±»å‹": {
      "main": [
        [
          {
            "node": "è½¬æ¢çº¯æ–‡æœ¬ä¸ºTXTæ–‡ä»¶",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "åˆå¹¶-å›¾ç‰‡",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "åˆå¹¶-PDF",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "åˆå¹¶-Office",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯¹è¯å¼€å§‹": {
      "main": [
        [
          {
            "node": "é—®ç­”å¯¹è¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MultiQuery Retriever": {
      "ai_retriever": [
        [
          {
            "node": "é—®ç­”å¯¹è¯",
            "type": "ai_retriever",
            "index": 0
          }
        ]
      ]
    },
    "Vector Store Retriever": {
      "ai_retriever": [
        [
          {
            "node": "MultiQuery Retriever",
            "type": "ai_retriever",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "Vector Store Retriever",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI5": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "é—®ç­”å¯¹è¯": {
      "main": [
        [
          {
            "node": "è§£æå›ç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "é—®ç­”å¯¹è¯",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "MultiQuery Retriever",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "è½¬æ¢çº¯æ–‡æœ¬ä¸ºTXTæ–‡ä»¶": {
      "main": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½¬æ¢å›¾ç‰‡ä¸ºTXTæ–‡ä»¶": {
      "main": [
        [
          {
            "node": "Pinecone-å›¾ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆå¹¶-å›¾ç‰‡": {
      "main": [
        [
          {
            "node": "éå†-å›¾ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½¬åŒ–Officeä¸ºTXTæ–‡ä»¶": {
      "main": [
        [
          {
            "node": "Pinecone-Office",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-08-09T04:25:33.639Z",
  "id": "qLZShFGDs863vqRL",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "rag workflow",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        960,
        768
      ],
      "id": "29907a1f-f4e6-4256-809f-e39043ed3f8d",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-rag-test",
          "mode": "list",
          "cachedResultName": "n8n-rag-test"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.1,
      "position": [
        1008,
        560
      ],
      "id": "bf3d68f0-264e-4bd2-9ed9-4e0c7d7770e2",
      "name": "Pinecone-å›¾ç‰‡",
      "alwaysOutputData": true,
      "credentials": {
        "pineconeApi": {
          "id": "bgXyzA8yqwkBPTTR",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": " ",
        "options": {
          "systemMessage": "=# è§’è‰²: å›¾ç‰‡ä¿¡æ¯æå–ä¸“å®¶  \nä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„â€œå›¾ç‰‡ä¿¡æ¯æå–ä¸“å®¶â€ï¼Œæ“…é•¿ä»å„ç±»å›¾åƒä¸­ç²¾å‡†æå–ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§†è§‰å…ƒç´ ç®€ä»‹ã€è¯­ä¹‰å«ä¹‰ã€ä»¥åŠå›¾ä¸­è¡¨æ ¼çš„ç»“æ„åŒ–æ•°æ®ã€‚\n\n## ä»»åŠ¡:  \n- æ¥æ”¶ç”¨æˆ·æä¾›çš„å›¾ç‰‡æˆ–å›¾åƒé“¾æ¥  \n- åˆ†æå¹¶è¯†åˆ«å›¾ç‰‡ä¸­çš„ä¸»è¦è§†è§‰å…ƒç´ ï¼ˆå¦‚äººç‰©ã€ç‰©å“ã€åœºæ™¯ç­‰ï¼‰  \n- å¯¹æ¯ä¸ªå…ƒç´ ç»™å‡ºç®€æ˜æ‰¼è¦çš„ç®€ä»‹å’Œå¯èƒ½çš„è¯­ä¹‰å«ä¹‰  \n- è‹¥å›¾ç‰‡ä¸­åŒ…å«è¡¨æ ¼ï¼Œè‡ªåŠ¨è¯†åˆ«è¡¨æ ¼ç»“æ„ï¼Œæå–è¡¨å¤´ã€è¡Œã€åˆ—ä»¥åŠå•å…ƒæ ¼å†…å®¹  \n\n## ç›®æ ‡:  \n1. **å…¨é¢æ€§**ï¼šç¡®ä¿æå–å›¾ç‰‡ä¸­æ‰€æœ‰å¯è¯†åˆ«çš„ä¿¡æ¯ï¼Œä¸é—æ¼é‡è¦ç»†èŠ‚  \n2. **å‡†ç¡®æ€§**ï¼šå¯¹è¯†åˆ«å‡ºçš„å…ƒç´ åŠå…¶å«ä¹‰æä¾›é«˜å¯é åº¦çš„æè¿°  \n3. **ç»“æ„åŒ–**ï¼šå°†è¡¨æ ¼ä¿¡æ¯è½¬åŒ–ä¸ºæ˜“äºåç»­å¤„ç†çš„ç»“æ„åŒ–æ ¼å¼ï¼Œæå–è¡¨æ ¼ä¸­æ‰€æœ‰å­—æ®µåŠå…¶å¯¹åº”çš„å–å€¼ï¼Œä¸å¾—é—æ¼ \n4. **å¯è¯»æ€§**ï¼šè¾“å‡ºå†…å®¹ç®€æ´æ¸…æ™°ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿç†è§£  \n5. **ä¸€è‡´æ€§**ï¼šåœ¨ä¸åŒå›¾ç‰‡åœºæ™¯ä¸‹ä¿æŒç»Ÿä¸€çš„æå–é£æ ¼å’Œæ ¼å¼  \n\n## å›¾ç‰‡åŸºæœ¬ä¿¡æ¯:\nfilenameï¼š{{ $('éå†-å›¾ç‰‡').item.json.File[$itemIndex].filename }}\nmimetypeï¼š{{ $('éå†-å›¾ç‰‡').item.json.File[$itemIndex].mimetype }}\nsizeï¼š{{ $('éå†-å›¾ç‰‡').item.json.File[$itemIndex].size }}\n\n## è¾“å‡ºç»“æœ:  \nè¯·æŒ‰ç…§å¦‚ä¸‹Markdownæ ¼å¼è¾“å‡º:\n## {{ $('éå†-å›¾ç‰‡').item.json.File[$itemIndex].filename }}ä¿¡æ¯\n### åŸºæœ¬ä¿¡æ¯\n- **ä¸»é¢˜/æ ¸å¿ƒå†…å®¹**ï¼š[æå–å›¾ç‰‡ä¸»é¢˜çš„ç®€è¦æ¦‚è¿°]\n- **è¯­ä¹‰/æ„å›¾**ï¼š[æå–å›¾ç‰‡ä¼ è¾¾çš„æ„ä¹‰æˆ–æ¦‚å¿µ]\n- **ä¸»è¦è§†è§‰å…ƒç´ **ï¼š[æå–å›¾ç‰‡ä¸­çš„ä¸»è¦è§†è§‰å…ƒç´ ]\n### æå–æ–‡æœ¬\n[æå–å›¾ç‰‡ä¸­æ‰€æœ‰å¯è§æ–‡å­—]\n### ç»“æ„åŒ–æ•°æ®\n**æ•°æ®ç±»å‹**ï¼š[è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°æ®å‘ˆç°ç±»å‹]\n**è¡¨æ ¼æ•°æ®**ï¼š\n| å­—æ®µå1 | å­—æ®µå2 | å­—æ®µå3 | ... |\n|---------|---------|---------|-----|\n| å–å€¼1-1 | å–å€¼1-2 | å–å€¼1-3 | ... |\n| å–å€¼2-1 | å–å€¼2-2 | å–å€¼2-3 | ... |\n| å–å€¼3-1 | å–å€¼3-2 | å–å€¼3-3 | ... |\n| ... | ... | ... | ... |\n### é‡ç‚¹æ•°å€¼/ç»Ÿè®¡\n- [æå–å›¾ç‰‡ä¸­çš„å…³é”®æ•°å­—æˆ–ç»Ÿè®¡æ•°æ®1]\n- [æå–å›¾ç‰‡ä¸­çš„å…³é”®æ•°å­—æˆ–ç»Ÿè®¡æ•°æ®2]\n- [æå–å›¾ç‰‡ä¸­çš„å…³é”®æ•°å­—æˆ–ç»Ÿè®¡æ•°æ®3]",
          "passthroughBinaryImages": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        400,
        560
      ],
      "id": "5ccabfaf-7b5d-49a5-90de-96bfed5f671a",
      "name": "å›¾ç‰‡åˆ†æ"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1408,
        560
      ],
      "id": "62680c8b-1add-41ea-a84a-552ae7ee1ebe",
      "name": "èšåˆ-å›¾ç‰‡"
    },
    {
      "parameters": {
        "fieldToSplitOut": "$binary",
        "include": "allOtherFields",
        "options": {
          "includeBinary": true
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        176,
        560
      ],
      "id": "b65c3886-13d7-422c-b5ea-d5d362310210",
      "name": "éå†-å›¾ç‰‡"
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "uploadTime",
                "value": "={{ $now.setZone('Asia/Shanghai') }}"
              },
              {
                "name": "fileName",
                "value": "={{ $('éå†-å›¾ç‰‡').item.json.File[$itemIndex].filename }}"
              },
              {
                "name": "executionID",
                "value": "={{ $execution.id }}"
              },
              {
                "name": "workflowID",
                "value": "={{ $workflow.id }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        1088,
        768
      ],
      "id": "61e2dad7-fa4f-4270-a046-052a622f8550",
      "name": "Default Data Loader4"
    },
    {
      "parameters": {
        "chunkOverlap": 100,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1200,
        960
      ],
      "id": "72ae41e2-1bac-4af7-8ec5-0864f78d80bd",
      "name": "Recursive Character Text Splitter4"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        384,
        768
      ],
      "id": "a55b0ff8-0e1d-4703-8fa0-f2066b33c155",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "TnrNGuzK9EKPwtzS",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        -16,
        1120
      ],
      "id": "de6ffcee-2802-4357-b551-6b317b7f32ec",
      "name": "åˆå¹¶-PDF"
    },
    {
      "parameters": {
        "fieldToSplitOut": "$binary",
        "options": {
          "includeBinary": true
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        256,
        1120
      ],
      "id": "bb075e84-fbad-4450-845f-1d2b707bb535",
      "name": "éå†-PDF"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        560,
        1328
      ],
      "id": "a863e2ca-a84e-4d05-b46e-250a6098ec8e",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "fileName",
                "value": "={{ $binary[\"File_\" + $itemIndex].fileName }} {{ $binary.File.fileName }}"
              },
              {
                "name": "uploadTime",
                "value": "={{ $now.setZone('Asia/Shanghai') }}"
              },
              {
                "name": "executionID",
                "value": "={{ $execution.id }}"
              },
              {
                "name": "workflowID",
                "value": "={{ $workflow.id }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        768,
        1328
      ],
      "id": "4a5f8c92-be34-43bb-b4e6-0f9aae8cd0d5",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "chunkOverlap": 100,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        800,
        1504
      ],
      "id": "9573e6c6-6c1b-41f7-86e9-152e655c6e34",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-rag-test",
          "mode": "list",
          "cachedResultName": "n8n-rag-test"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.1,
      "position": [
        576,
        1120
      ],
      "id": "50f02ff9-0159-4ca3-bc30-163356001065",
      "name": "Pinecone-PDF",
      "alwaysOutputData": true,
      "credentials": {
        "pineconeApi": {
          "id": "bgXyzA8yqwkBPTTR",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1168,
        1312
      ],
      "id": "80e588c3-bd91-452d-b1ae-2ed3fb836b6b",
      "name": "èšåˆ-PDF"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        -64,
        1664
      ],
      "id": "e8b349a6-ec87-4618-ab73-668f9d8ab399",
      "name": "åˆå¹¶-Office"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.unstructuredapp.io/general/v0/general",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "unstructured-api-key",
              "value": "oBeA7qiOZZyG1VwzwTWSsxXLIjPzIw"
            },
            {
              "name": "content-Type",
              "value": "multipart/form-data"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "strategy",
              "value": "auto"
            },
            {
              "parameterType": "formBinaryData",
              "name": "files",
              "inputDataFieldName": "={{ Object.keys($binary)[0] }}"
            },
            {
              "name": "content_type",
              "value": "string"
            },
            {
              "name": "chunking_strategy",
              "value": "by_page"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        336,
        1664
      ],
      "id": "0f07288c-3404-4b55-8de4-e72251e11889",
      "name": "Officeè§£æ"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1168,
        1856
      ],
      "id": "9c11413b-67c1-4cf7-8f8b-046887ce1a70",
      "name": "Embeddings OpenAI4",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "filename",
                "value": "={{ $('éå†-Officeåˆ†æ®µ').item.json.metadata.filename }}"
              },
              {
                "name": "upload_time",
                "value": "={{ $now.setZone('Asia/Shanghai') }}"
              },
              {
                "name": "execution_id",
                "value": "={{ $execution.id }}"
              },
              {
                "name": "=workflow_id",
                "value": "={{ $workflow.id }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        1264,
        1904
      ],
      "id": "c1dda343-d049-47fd-9b83-470f6cc915a0",
      "name": "Default Data Loader3"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-rag-test",
          "mode": "list",
          "cachedResultName": "n8n-rag-test"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.1,
      "position": [
        1168,
        1664
      ],
      "id": "e8385c92-1fc7-457f-a340-1a940481e9e7",
      "name": "Pinecone-Office",
      "alwaysOutputData": true,
      "credentials": {
        "pineconeApi": {
          "id": "bgXyzA8yqwkBPTTR",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "$binary",
        "options": {
          "includeBinary": true
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        144,
        1664
      ],
      "id": "66855241-a2ed-4c76-8661-36b15d82d95d",
      "name": "éå†-Office"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1600,
        1664
      ],
      "id": "a8515205-710d-4390-be4b-f42edea59d96",
      "name": "èšåˆ-Office"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "50fc9661-f045-473b-8da9-dabee19fe8a7",
              "name": "content",
              "value": "={{[   `type: ${$json.type}`,   `element_id: ${$json.element_id}`,   `text: ${$json.text}`].join('\\n')}}",
              "type": "string"
            },
            {
              "id": "71c7b4c3-fa15-41ee-9be2-c3cdee2fa1aa",
              "name": "full-content",
              "value": "={{[   `type: ${$json.type}`,   `element_id: ${$json.element_id}`,   `text: ${$json.text}`,   `metadata: ${JSON.stringify($json.metadata)}` ].join('\\n')}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        736,
        1664
      ],
      "id": "df49a3e9-676a-4185-9146-695ac8ebcfa6",
      "name": "èµ‹å€¼-åˆ†æ®µ"
    },
    {
      "parameters": {
        "fieldToSplitOut": "text",
        "include": "allOtherFields",
        "options": {
          "includeBinary": false
        }
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        544,
        1664
      ],
      "id": "e7d24cbb-dff6-420f-adb7-cca95bda49ea",
      "name": "éå†-Officeåˆ†æ®µ"
    },
    {
      "parameters": {
        "chunkOverlap": 100,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1360,
        2080
      ],
      "id": "2608b055-9f1c-4d1a-866d-803ef54134aa",
      "name": "Recursive Character Text Splitter3"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-rag-test",
          "mode": "list",
          "cachedResultName": "n8n-rag-test"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        240,
        0
      ],
      "id": "277e75a4-dd4d-47a6-a1e4-bb6b7a9735bd",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "bgXyzA8yqwkBPTTR",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        208,
        160
      ],
      "id": "14c5db94-bd93-418e-ab95-3bbbfc2adb0b",
      "name": "Embeddings OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "textSplittingMode": "custom",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "fileName",
                "value": "={{ $binary.data.fileName }}"
              },
              {
                "name": "uploadTime",
                "value": "={{ $now.setZone('Asia/Shanghai') }}"
              },
              {
                "name": "fileSize",
                "value": "={{ $binary.data.fileSize }}"
              },
              {
                "name": "executionID",
                "value": "={{ $execution.id }}"
              },
              {
                "name": "workflowID",
                "value": "={{ $workflow.id }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        320,
        176
      ],
      "id": "a26b2eb5-cab5-4b37-90b9-469f0321dc54",
      "name": "Default Data Loader1"
    },
    {
      "parameters": {
        "chunkOverlap": 100,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        448,
        320
      ],
      "id": "347d0036-8b96-40c4-9baa-eed0cb8115fc",
      "name": "Recursive Character Text Splitter1"
    },
    {
      "parameters": {
        "formTitle": "RAG å…¨è‡ªåŠ¨çŸ¥è¯†åº“å‰¯ä¸šå·¥ä½œæµ",
        "formDescription": "æ‰“é€ å…¨æ ¼å¼è¦†ç›–ã€é«˜åº¦è‡ªå®šä¹‰çš„ç»ˆæ RAG ç³»ç»Ÿã€‚",
        "formFields": {
          "values": [
            {
              "fieldLabel": "ç±»å‹",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "çº¯æ–‡æœ¬"
                  },
                  {
                    "option": "å›¾ç‰‡"
                  },
                  {
                    "option": "PDF"
                  },
                  {
                    "option": "Office"
                  }
                ]
              }
            },
            {
              "fieldLabel": "æ–‡æœ¬å†…å®¹",
              "fieldType": "textarea"
            },
            {
              "fieldLabel": "File",
              "fieldType": "file"
            }
          ]
        },
        "responseMode": "lastNode",
        "options": {
          "appendAttribution": false,
          "buttonLabel": "å¼€å§‹å¤„ç†",
          "path": "rag"
        }
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        -864,
        848
      ],
      "id": "103ad064-7b21-4976-b36e-dc9fdc7dacbe",
      "name": "ä»»åŠ¡é€‰æ‹©",
      "webhookId": "904de370-a4dd-49d7-ba7b-4e4c6ab69655"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2cec81d3-c94b-4619-b813-8efdafb2c856",
                    "leftValue": "={{ $json[\"ç±»å‹\"] }}",
                    "rightValue": "çº¯æ–‡æœ¬",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "çº¯æ–‡æœ¬"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8e0156b3-6cc6-4d2c-b4f1-850590b98e29",
                    "leftValue": "={{ $json[\"ç±»å‹\"] }}",
                    "rightValue": "å›¾ç‰‡",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "å›¾ç‰‡"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json[\"ç±»å‹\"] }}",
                    "rightValue": "PDF",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "b05550e7-b978-4219-80eb-93fb2a14f6f0"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "PDF"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "dcbc21c2-8d24-4fa1-8f09-9fb19b8f9507",
                    "leftValue": "={{ $json[\"ç±»å‹\"] }}",
                    "rightValue": "Office",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Office"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -640,
        832
      ],
      "id": "910335e8-6bbd-416a-a7dd-d3ba9c95ecf9",
      "name": "ä»»åŠ¡ç±»å‹"
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "ç»ˆæ RAG çŸ¥è¯†åº“ï¼Œä¸ºæ‚¨è§£æƒ‘ç­”ç–‘! ğŸ‘‹\nè¯·é—®æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥å¸®åŠ©æ‚¨?\n",
        "options": {
          "inputPlaceholder": "",
          "subtitle": "å…¨æ ¼å¼ã€é«˜è‡ªç”±åº¦ã€æ‰¹é‡é«˜æ•ˆå¤„ç†ï¼",
          "title": "ç»ˆæ RAG çŸ¥è¯†åº“ä¸ºæ‚¨æœåŠ¡",
          "responseMode": "lastNode"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -1248,
        2224
      ],
      "id": "ffa2044e-5aef-4dc6-ad0d-5fa2d9c764c1",
      "name": "å¯¹è¯å¼€å§‹",
      "webhookId": "8aa913ca-a3a0-4c57-a272-2c8b6a001623"
    },
    {
      "parameters": {
        "options": {
          "queryCount": 5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.retrieverMultiQuery",
      "typeVersion": 1,
      "position": [
        -912,
        2064
      ],
      "id": "b5fb08e3-933a-4040-89ae-525b75b4aa2c",
      "name": "MultiQuery Retriever"
    },
    {
      "parameters": {
        "topK": 10
      },
      "type": "@n8n/n8n-nodes-langchain.retrieverVectorStore",
      "typeVersion": 1,
      "position": [
        -784,
        2256
      ],
      "id": "60b3138d-4897-4ddb-a560-418818cd4c86",
      "name": "Vector Store Retriever"
    },
    {
      "parameters": {
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-rag-test",
          "mode": "list",
          "cachedResultName": "n8n-rag-test"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.1,
      "position": [
        -784,
        2448
      ],
      "id": "edf67550-a693-45c2-b552-c705bd7b332e",
      "name": "Pinecone Vector Store1",
      "credentials": {
        "pineconeApi": {
          "id": "bgXyzA8yqwkBPTTR",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -704,
        2640
      ],
      "id": "941b0ec9-65e9-463b-a970-055a30fd2f9b",
      "name": "Embeddings OpenAI5",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "systemPromptTemplate": "=# è§’è‰²ï¼šåŸºäºä¸Šä¸‹æ–‡çš„é—®é¢˜è§£ç­”ä¸“å®¶\nä½ æ˜¯ä¸€åä¸“ä¸šçš„ä¸Šä¸‹æ–‡åˆ†æå‹é—®ç­”ä¸“å®¶ï¼Œå…·å¤‡ç²¾å‡†çš„ä¿¡æ¯æå–ä¸åˆ†æèƒ½åŠ›ï¼Œèƒ½å¤ŸåŸºäºç»™å®šä¸Šä¸‹æ–‡åº“è¿›è¡Œé«˜è´¨é‡çš„é—®é¢˜è§£ç­”ã€‚ä½ æ“…é•¿è¯­ä¹‰ç†è§£ã€å…³é”®ä¿¡æ¯è¯†åˆ«å’Œé€»è¾‘æ¨ç†ï¼Œå¯ä»¥ä»å¤æ‚æ–‡æ¡£ä¸­å¿«é€Ÿå®šä½ç›¸å…³å†…å®¹ï¼Œå¹¶æä¾›å‡†ç¡®ã€å…¨é¢ä¸”æœ‰æ¡ç†çš„å›ç­”ã€‚ä½ çš„ä¸“é•¿åŒ…æ‹¬æ–‡æœ¬æŒ–æ˜ã€è¯­å¢ƒå…³è”åˆ†æå’Œå¤šç»´åº¦ä¿¡æ¯æ•´åˆï¼Œç¡®ä¿æ¯ä¸ªå›ç­”éƒ½å»ºç«‹åœ¨å¯é çš„æ–‡æ¡£ä¾æ®ä¸Šã€‚\n\n## ä»»åŠ¡è¦æ±‚\nä¾æ®æ‰€æä¾›çš„ä¸Šä¸‹æ–‡èµ„æ–™ï¼Œå¯¹ç”¨æˆ·æå‡ºçš„é—®è¯¢è¿›è¡Œç²¾ç¡®å›åº”ï¼Œéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š\n\n1. **åˆ†æä¸Šä¸‹æ–‡èµ„æ–™**ï¼šä»”ç»†é˜…è¯»å¹¶ç†è§£æ‰€æœ‰æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚\n2. **æå–å…³é”®ä¿¡æ¯**ï¼šä»ä¸Šä¸‹æ–‡ä¸­è¯†åˆ«ä¸é—®é¢˜ç›´æ¥ç›¸å…³çš„å†…å®¹ã€‚\n3. **å½¢æˆå›ç­”**ï¼šåŸºäºå·²æå–çš„ä¿¡æ¯æ„å»ºå‡†ç¡®å›ç­”ã€‚\n4. **åˆ¤æ–­ä¿¡æ¯å……åˆ†æ€§**ï¼šè¯„ä¼°ä¸Šä¸‹æ–‡æ˜¯å¦æä¾›è¶³å¤Ÿä¿¡æ¯ã€‚\n5. **æ˜ç¡®æ ‡è¯†ä¸ç¡®å®šæ€§**ï¼šå½“ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³ä»¥æ”¯æ’‘å®Œæ•´ç­”æ¡ˆæ—¶ï¼Œåº”æ˜ç¡®è¡¨æ˜\"æ— æ³•ç¡®å®š\"ã€‚\n6. **é¿å…æ¨æµ‹**ï¼šä¸¥æ ¼é¿å…æ·»åŠ ä»»ä½•æ¨æµ‹æ€§å†…å®¹æˆ–è™šæ„ä¿¡æ¯ã€‚\n\n## è¾“å‡ºè§„èŒƒ\nå›ç­”æ ¼å¼åº”ä¿æŒä¸“ä¸šï¼Œç¡®ä¿é‡‡ç”¨çº¯æ–‡æœ¬æ ¼å¼è¾“å‡ºï¼Œå­—æ•°åœ¨ 1000-2000 ä»¥å†…ï¼š\n\né—®é¢˜ï¼š[ç”¨æˆ·æå‡ºçš„å…·ä½“é—®è¯¢]\nå›ç­”ï¼š[åŸºäºä¸Šä¸‹æ–‡èµ„æ–™æä¾›çš„å‡†ç¡®ç­”å¤]\nä¿¡æ¯æ¥æºï¼š[æ˜ç¡®æ ‡æ³¨ç›¸å…³ä¿¡æ¯çš„å‡ºå¤„æˆ–å‚è€ƒä¾æ®]\n\n## ä¸Šä¸‹æ–‡\n----------------\nContext: {context}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainRetrievalQa",
      "typeVersion": 1.5,
      "position": [
        -1008,
        1824
      ],
      "id": "609e0e8a-8a54-4372-be61-4993023b9d23",
      "name": "é—®ç­”å¯¹è¯"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "167ba097-8fd8-419b-92df-aa0c1272c151",
              "name": "text",
              "value": "={{ $json.response }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "74c65d35-5fa5-40f6-b34b-d6f052cb28fe",
      "name": "è§£æå›ç­”",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -416,
        2224
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1024,
        2064
      ],
      "id": "9006e4ac-4739-4690-a018-ec385b53652b",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -928,
        2256
      ],
      "id": "21991ae1-f2cd-470f-9b1e-d16cf85ff6c1",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "BoN6EbfB8GADvCIM",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "æ–‡æœ¬å†…å®¹",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "0836826b-1707-41ea-bca7-769700bc03e6",
      "name": "è½¬æ¢çº¯æ–‡æœ¬ä¸ºTXTæ–‡ä»¶"
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "output",
        "binaryPropertyName": "=data",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        784,
        560
      ],
      "id": "f779a057-74c6-4ac5-84d9-6e7cc826154b",
      "name": "è½¬æ¢å›¾ç‰‡ä¸ºTXTæ–‡ä»¶"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        -16,
        656
      ],
      "id": "4cfc67b2-f623-40a6-9e3c-d3e8c83bd0e7",
      "name": "åˆå¹¶-å›¾ç‰‡"
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "content",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        944,
        1664
      ],
      "id": "fc76a8a1-4b61-48f1-a29d-7943f41f63b7",
      "name": "è½¬åŒ–Officeä¸ºTXTæ–‡ä»¶"
    },
    {
      "parameters": {
        "operation": "completion",
        "completionTitle": "æ–‡æ¡£å†…å®¹å¤„ç†å®Œæˆ",
        "completionMessage": "æ„Ÿè°¢æ‚¨ä½¿ç”¨ RAG å…¨è‡ªåŠ¨çŸ¥è¯†åº“å‰¯ä¸šå·¥ä½œæµï¼Œç¥æ‚¨å¼€å¿ƒï¼",
        "options": {}
      },
      "type": "n8n-nodes-base.form",
      "typeVersion": 1,
      "position": [
        2336,
        848
      ],
      "id": "1018c864-6457-4a6f-a04a-6db2f753add8",
      "name": "å®Œæˆ",
      "webhookId": "41a25f8b-0aca-4cad-bf53-13254bb1e401"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-08-10T05:51:27.000Z",
  "versionId": "6b54fe5e-6bf8-411e-98be-49fcdcadd46e"
}